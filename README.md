# FineLab
The management tool for labs
# Contents
- [To Do List](#to-do-list)

# Dependenciesï¼š 
* python3: Downlad and install
* flask: `pip install flask`



# To Do List:
- [x] Flag of primary_key/id
- [x] ID anchor of XX. (link in search page and title in target_view)
- [ ] Relevants in target_view
- [ ] Make target_scope work
- [ ] put content displacing function into package
- [ ] Query result formatter in database
- [ ] Check user authority in actions
- [ ] Merge insert and edit page into one
- [ ] Read authority
- [ ] Insert authority
- [ ] Update authority
- [ ] Delete authority
- [ ] Authority for divices
- [ ] Data structure import form csv
- [ ] Data structure export to csv
- [ ] Data structure Regular expression check
- [x] Use Data structure to generate nav bar
- [ ] Link from search page to target_scope 
- [ ] ADD column in each table: __owner_user_id              for auth
- [ ] ADD column in each table: __deleted_mark               for recording
- [ ] ADD column in each table: __random_key                 to prevent dumplicate inserting 
- [ ] ADD column in each table: __last_update_timestamp      
- [ ] ADD column in each table: __insert_timestamp 
- [ ] ADD column in each table: __delete_timestamp
- [ ] Change real-delete into logical-delete
- [ ] Search from nav bar directly
- [ ] Column Filter in pages
- [ ] Add function: PDF Tag generating

# Changelog
**2018-10-20**
- add .gitignore file.
- spilt data_stru.json to separate json files

**2018-12-18**
- for types of inputs are supported: text, select, textarea, radio
- use [**black**](https://github.com/ambv/black) (The uncompromising Python code formatter) reformatted the whole codes
- add run_server.sh
# How to write the Data Structure JSON File (V1)?
## Dir Structure

# How to write the Data Structure JSON File (V2)?
## Dir Structure

## Databases (Data Framework)

## Tables (Business)
### For Each Table:
| JSON Field Name      | Discription                | Exceptions |
| -------------------- | -------------------------- | ---------- |
| $TYPE                | The type of the table      |            |
| $SHOW_IN_SEARCH_MENU |                            |            |
| $SHOW_IN_APP_MENU    |                            |            |
| $DISPLAY_NAME        |                            |            |
| $AUTH_QUERY          | Default auth of columns    |            |
| $AUTH_UPDATE         | Default auth of columns    |            |
| $AUTH_INSERT         |                            |            |
| $AUTH_DELETE         |                            |            |
| $COLUMNS             | A dict, columns of a table |            |

Table - Fields Defined by User in JSON File

| Field Name       | Discription                                     | Exceptions |
| ---------------- | ----------------------------------------------- | ---------- |
| $NAME            | The name of the table                           |            |
| $NAME_COLUMN     | The name column's name in this table            |            |
| $PRIMARY_KEY     |                                                 |            |
| $SEARCH_FIELDS   |                                                 |            |
| $OWNER_COLUMN    |                                                 |            |
| $IS_AUTH_SUBJECT | If this table contains the information of users |            |

Table - Fields Generated by System
Sys-generated args:
### Columns
#### Columns Defined by User (Written In JSON File)
| Column Type       | DB            | Specified JSON Fields                             | Display                   | Input                | Content           |
| ----------------- | ------------- | ------------------------------------------------- | ------------------------- | -------------------- | ----------------- |
| id                | [Primary Key] |                                                   | String(bold)              | [None]               | id                |
| name              | String        |                                                   | String(bold)              | Text                 |                   |
| hash              | String        |                                                   | [None]                    | Text(Before Hashing) | Hashed Value      |
| foreign_id        | [Foreign Key] | foreign_t_name                                    | Name of the cited row     | [JS]                 | id                |
| foreign_column    | [No column]   | foreign_id_column(in this table) and cited_column | Cited cell content        | [None]               | [None]            |
| string            | Column        | *displacer *formatter and *input_checker          | Formated String           | Text                 |                   |
| textarea          | Column        |                                                   | Formated String Paragraph | Text Area            |                   |
| select/sel        | Column        | displacer                                         | Displaced String          | Select               | value             |
| sel_radio         | Column        | displacer                                         | Displaced String          | Radio Buttons        | value             |
| multi-select/msel | Column        | displacer                                         | Displaced String li       | [JS]                 | [comma seperated] |
| msel-checkboxs    | Column        | displacer                                         | Displaced String li       | Check Boxes          | [comma seperated] |
| check/boolean     | Column        |                                                   |                           |                      |                   |
| refer             | Column        |                                                   | Name                      | [JS]                 | column@table#id   |
| multi_refer       | Column        |                                                   | Names li                  | [JS]                 | [comma seperated] |
| date              | Column        |                                                   |                           | [JS]                 |                   |
| datetime          | Column        |                                                   |                           | [JS]                 |                   |

Table - Columns that Should be Defined in Table JSON File




#### System Generated Columns
| Column Name             | Updates When | Content                             |
| ----------------------- | ------------ | ----------------------------------- |
| __owner_user_id         |              |                                     |
| __status                |              | fragmentary/active/inactive/deleted |
| __random_key            |              |                                     |
| __last_update_timestamp |              |                                     |
| __insert_timestamp      |              |                                     |
| __delete_timestamp      |              |                                     |

Table - System-generated columns

#### For Each Column
| JSON Field Name     | Default | Exceptions |
| ------------------- | ------- | ---------- |
| $TYPE               |         |            |
| $IS_IN_SEARCH_FIELD | True    |            |
| $SHOW_IN_SCOPE_HEAD | True    |            |
| $SHOW_IN_BRIEF_VIEW | True    |            |
| $DISPLAY_NAME       |         |            |
| $AUTH_QUERY         |         |            |
| $AUTH_UPDATE        |         |            |

Table - Fields Defined by User in JSON File

| Field Name | Value                 | Exceptions |
| ---------- | --------------------- | ---------- |
| $NAME      | The Key of the column |            |

Table - Fields Generated by System
